(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{53:function(e,t,a){e.exports=a(99)},58:function(e,t,a){},64:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(17),s=a.n(c),o=(a(58),a(42)),l=a(43),u=a(51),i=a(48),m=a(7),p=a(4),d=a(5),E=a.n(d),f=a(13),v=a(6),h=a(100),b=(a(64),a(14)),g=a.n(b),O=function(e){e?g.a.defaults.headers.common["x-auth-token"]=e:delete g.a.defaults.headers.common["x-auth-token"]},N=function(e){return function(t){t({type:"INPUT_TEXT",payload:e})}},y=function(){return function(){var e=Object(f.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(localStorage.getItem("token")),e.prev=1,e.next=4,g.a.get("/users/auth");case 4:a=e.sent,t({type:"USER_LOADED",payload:a.data.user}),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),console.log("Error",e.t0),t({type:"AUTH_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},j=function(){return function(){var e=Object(f.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT_USER"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(){return function(e){e({type:"CLEAR_INPUT"})}},k=function(){return function(e){e({type:"CLEAR_ERROR"})}},w=Object(v.b)(null,{clearErrors:k})((function(e){var t=function(t){e.clearErrors()};return n.a.createElement("div",{className:"navbar-container"},n.a.createElement("ul",{className:"ul"},n.a.createElement("div",null,n.a.createElement("li",{className:"navbar-li"},n.a.createElement(m.b,{to:"/",className:"nav-link"},"Home"))),n.a.createElement("div",{className:"empty-div"}),n.a.createElement("div",{className:"li-container"},n.a.createElement("li",{className:"navbar-li"},n.a.createElement(m.b,{to:"/register",className:"nav-link",onClick:t},"Register")),n.a.createElement("li",{className:"navbar-li"},n.a.createElement(m.b,{to:"/login",className:"nav-link",onClick:t},"Login")))))})),_=a(45),x=a(0),I=(a(83),Object(v.b)((function(e){return{auth:e.auth}}))((function(e){return n.a.createElement("div",{className:"error-container"},n.a.createElement("div",{className:"error-details"},n.a.createElement(x.b.Provider,{value:{size:"0.8rem",className:"error-icon"}},n.a.createElement(_.a,null)),n.a.createElement("p",{className:"error-message"}," ",e.errorMsg)))}))),A=(a(84),Object(v.b)((function(e){return{user:e.user,auth:e.auth}}),{registerUser:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){var r,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("/users/signup",e);case 3:r=t.sent,a({type:"REGISTER_SUCCESS",payload:r.data}),a(y()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n=void 0!==t.t0.response.data.error?t.t0.response.data.error:"Can't connect to server",a({type:"REGISTER_FAIL",payload:n});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},onInput:N,clearInput:S,loadUser:y,clearErrors:k})((function(e){var t=function(t){var a={target:t.target.name,value:t.target.value};e.onInput(a)},a=function(){var t=Object(f.a)(E.a.mark((function t(a){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r={username:e.user.username,email:e.user.email,password:e.user.password},t.next=4,e.registerUser(r);case 4:e.clearInput();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){e.auth.isAuthenticated&&e.auth.user?e.history.push("/profile/".concat(e.auth.user._id)):localStorage.getItem("token")&&e.loadUser()}),[e.auth.isAuthenticated,e.history,e.auth.user]);var c=e.auth.error?e.auth.error.map((function(e){return n.a.createElement(I,{key:Object(h.a)(),errorMsg:e.msg})})):null;return n.a.createElement("div",null,n.a.createElement(w,null),n.a.createElement("div",{className:"register-container"},n.a.createElement("div",{className:"register-card"},n.a.createElement("h1",{className:"register-title"},"Register New User"),n.a.createElement("form",{className:"register-form",onSubmit:a},n.a.createElement("div",{className:"register-field"},n.a.createElement("input",{type:"text",placeholder:"Username",className:"register-input",name:"username",value:e.user.username,onChange:t,required:!0})),n.a.createElement("div",{className:"register-field"},n.a.createElement("input",{type:"email",placeholder:"Email",className:"register-input",name:"email",value:e.user.email,onChange:t,required:!0})),n.a.createElement("div",{className:"register-field"},n.a.createElement("input",{type:"password",placeholder:"Password",className:"register-input",name:"password",value:e.user.password,onChange:t,required:!0})),n.a.createElement("div",{className:"register-submit"},n.a.createElement("input",{type:"submit",value:"Register",className:"btn-submit"})))),c))}))),P=(a(85),Object(v.b)((function(e){return{user:e.user,auth:e.auth}}),{onInput:N,clearInput:S,login:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){var r,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.post("/users/login",e);case 3:r=t.sent,a({type:"LOGIN_USER",payload:r.data}),a(y()),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),n=void 0!==t.t0.response.data.error?t.t0.response.data.error:"Can't connect to server",a({type:"LOGIN_FAIL",payload:[n[0]]});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},clearErrors:k,loadUser:y})((function(e){var t=function(t){var a={target:t.target.name,value:t.target.value};e.onInput(a)};Object(r.useEffect)((function(){e.auth.isAuthenticated&&e.auth.user?e.history.push("/profile/".concat(e.auth.user._id)):localStorage.getItem("token")&&e.loadUser()}),[e.auth.isAuthenticated,e.auth.user,e.history]);var a=e.auth.error?e.auth.error.map((function(e){return n.a.createElement(I,{key:Object(h.a)(),errorMsg:e.msg})})):null;return n.a.createElement("div",null,n.a.createElement(w,null),n.a.createElement("div",{className:"login-container"},n.a.createElement("div",{className:"login-card"},n.a.createElement("h1",{className:"login-title"},"Login User"),n.a.createElement("form",{className:"login-form",onSubmit:function(t){t.preventDefault();var a={email:e.user.email,password:e.user.password};e.login(a),e.clearInput()}},n.a.createElement("div",{className:"login-field"},n.a.createElement("input",{type:"email",name:"email",value:e.user.email,placeholder:"Email",className:"login-input",onChange:t})),n.a.createElement("div",{className:"login-field"},n.a.createElement("input",{type:"password",name:"password",value:e.user.password,placeholder:"Password",className:"login-input",onChange:t})),n.a.createElement("div",{className:"login-submit"},n.a.createElement("input",{type:"submit",value:"Login",className:"btn-submit"})))),a))}))),R=(a(86),Object(v.b)(null,{logout:j})((function(e){Object(r.useEffect)((function(){}),[e]);return n.a.createElement("div",{className:"pbar-container"},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.a.createElement("div",{className:"pbar-list-container"},n.a.createElement("ul",{className:"pbar-ul"},n.a.createElement("li",{className:"pbar-li"},n.a.createElement(m.b,{to:"/profile/".concat(e.user._id),className:"pbar-link"},"Profile")),n.a.createElement("li",{className:"pbar-li"},n.a.createElement(m.b,{to:"/posts/".concat(e.user._id),className:"pbar-link"},"My Posts")),n.a.createElement("li",{className:"pbar-li"},n.a.createElement(m.b,{to:"/explore",className:"pbar-link"},"Explore")))),n.a.createElement("div",{className:"pbar-list-container"},n.a.createElement("ul",{className:"pbar-ul"},n.a.createElement("li",{className:"pbar-li"},n.a.createElement(m.b,{to:"",className:"pbar-link",onClick:function(t){e.logout()}},"Logout"))))))}))),T=Object(v.b)((function(e){return{auth:e.auth}}),{loadUser:y,logout:j})((function(e){Object(r.useEffect)((function(){localStorage.getItem("token")&&e.loadUser()}),[e.auth.isAuthenticated]);var t=e.auth.user?"Welcome ".concat(e.auth.user.username):"Loading...";return n.a.createElement("div",null,e.auth.user?n.a.createElement(R,{user:e.auth.user}):"Loading..",n.a.createElement("h1",null,t))})),U=Object(v.b)((function(e){return{auth:e.auth}}))((function(){return n.a.createElement("div",null,n.a.createElement(w,null),n.a.createElement("h1",null,"Home Page. Welcome to the blog"))})),C=a(49),L=a(28),D=a.n(L),G=a(46),M=(a(96),function(e){return n.a.createElement("div",{className:"postcard-container"},n.a.createElement("h2",{className:"postcard-heading"},n.a.createElement(m.b,{className:"postcard-link",to:"/profile/".concat(e.id)},e.name)),n.a.createElement("p",{className:"postcard-datetime"},e.date),n.a.createElement("div",{className:"postcard-post-container"},n.a.createElement("p",{className:"postcard-text"},e.post)),e.canDelete?n.a.createElement("div",{className:"postcard-deleteicon-container"},n.a.createElement(x.b.Provider,{value:{color:"red",className:"postcard-deleteicon"}},n.a.createElement(G.a,{onClick:function(t){e.deletePost(t,e.id)}}))):null)});a(97),a(98);D.a.setAppElement(document.querySelector("#root"));var F=Object(v.b)((function(e){return{auth:e.auth,post:e.post}}),{loadUser:y,getMyPosts:function(){return function(){var e=Object(f.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/post/myposts");case 3:a=e.sent,t({type:"GET_MY_POSTS_SUCCESS",payload:a.data.posts}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"GET_MY_POSTS_FAIL",payload:e.t0.response});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},addPost:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){var r,n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(localStorage.getItem("token")),console.log("post -",e),t.prev=2,r={post:e},t.next=6,g.a.post("/post/addnew",r);case 6:a({type:"ADD_POST"}),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(2),console.log("Add Post Error -",t.t0.response.data.error[0].msg),n=void 0!==t.t0.response.data.error?t.t0.response.data.error[0].msg:"Can't connect to server",console.log(n),a({type:"ADD_POST_FAIL",payload:n});case 15:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},deletePost:function(e){return function(){var t=Object(f.a)(E.a.mark((function t(a){var r;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.a.delete("/post/delete",{data:{id:e}});case 3:r=t.sent,console.log(r.data),a({type:"DELETE_POST"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0.response);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)({isOpen:!1,post:""}),a=Object(C.a)(t,2),c=a[0],s=a[1],o=e.post,l=e.loadUser,u=e.getMyPosts,i=e.deletePost;Object(r.useEffect)((function(){localStorage.getItem("token")&&l(),u()}),[o.refresh]);var m=function(e,t){i(t)};return n.a.createElement("div",null,e.auth.user?n.a.createElement(R,{user:e.auth.user}):"Loading..",n.a.createElement("div",{className:"userposts-container"},e.post.error?n.a.createElement(I,{errorMsg:e.post.error}):null,n.a.createElement("div",{className:"userpostsheading-heading"},n.a.createElement("h1",null,"My Posts"),n.a.createElement("button",{className:"userposts-btn-add",onClick:function(e){s({isOpen:!0})}},"Add New")),n.a.createElement("div",{className:"userposts-cardlist"},e.post.posts.length>0?e.post.posts.map((function(e){return n.a.createElement(M,{key:e._id,id:e._id,name:e.username,post:e.post,date:e.date,canDelete:!0,deletePost:m})})):n.a.createElement(I,{errorMsg:"No Post Found!"})),n.a.createElement(D.a,{isOpen:c.isOpen,overlayClassName:"modal-overlay",className:"modal-content"},n.a.createElement("h2",{className:"modal-newpost-title"},"Add New Post"),n.a.createElement("div",{className:"modal-newpost-form-container"},n.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addPost(c.post),s({isOpen:!1})}},n.a.createElement("textarea",{name:"post",cols:"65",rows:"8",className:"modal-newpost-textarea",placeholder:"Share Your Thoughts...",onChange:function(e){s({post:e.target.value,isOpen:!0})},value:c.post,required:!0}),n.a.createElement("div",{className:"modal-newpost-buttons"},n.a.createElement("input",{type:"submit",value:"Add",className:"modal-newpost-button-add"}),n.a.createElement("button",{onClick:function(e){s({isOpen:!1})},className:"modal-newpost-button-cancel"},"Cancel")))))))})),q=function(){return n.a.createElement("div",null,"Explore Page")};localStorage.token&&O(localStorage.token);var Y=function(e){Object(u.a)(a,e);var t=Object(i.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement(m.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(p.c,null,n.a.createElement(p.a,{exact:!0,path:"/",component:U}),n.a.createElement(p.a,{path:"/register",component:A}),n.a.createElement(p.a,{path:"/login",component:P}),n.a.createElement(p.a,{exact:!0,path:"/profile/:id",component:T}),n.a.createElement(p.a,{exact:!0,path:"/profile",render:function(){return n.a.createElement("div",null,n.a.createElement("h2",null,"Unauthorized"),n.a.createElement("p",null,"Go to the"," ",n.a.createElement(m.b,{to:"/login",style:{textDecoration:"none"}},"Login")," ","page instead."),n.a.createElement("p",null,"Or you can"," ",n.a.createElement(m.b,{to:"/register",style:{textDecoration:"none"}},"Register")," ","here"))}}),n.a.createElement(p.a,{exact:!0,path:"/posts/:id",component:F}),n.a.createElement(p.a,{exact:!0,path:"/explore",component:q}))))}}]),a}(r.Component),H=a(16),z=a(22),J=a(2),W={username:"",email:"",password:""},X={token:null,isAuthenticated:null,user:null,error:null},B=a(50),K={posts:[],error:null,refresh:!1},Q=Object(H.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INPUT_TEXT":return Object(J.a)(Object(J.a)({},e),{},Object(z.a)({},t.payload.target,t.payload.value));case"CLEAR_INPUT":return Object(J.a)(Object(J.a)({},e),{},{username:"",email:"",password:""});default:return Object(J.a)({},e)}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADED":return Object(J.a)(Object(J.a)({},e),{},{user:t.payload,isAuthenticated:!0});case"REGISTER_SUCCESS":case"LOGIN_USER":return localStorage.setItem("token",t.payload.token),Object(J.a)(Object(J.a)({},e),{},{token:localStorage.getItem("token"),isAuthenticated:!0});case"LOGOUT_USER":return localStorage.removeItem("token"),Object(J.a)(Object(J.a)({},e),{},{token:null,isAuthenticated:!1,user:null,error:null});case"REGISTER_FAIL":case"AUTH_ERROR":case"LOGIN_FAIL":return localStorage.removeItem("token"),Object(J.a)(Object(J.a)({},e),{},{token:null,error:t.payload,isAuthenticated:!1});case"CLEAR_ERROR":return Object(J.a)(Object(J.a)({},e),{},{error:null});default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MY_POSTS_SUCCESS":return Object(J.a)(Object(J.a)({},e),{},{posts:Object(B.a)(t.payload)});case"ADD_POST":return Object(J.a)(Object(J.a)({},e),{},{refresh:!e.refresh,error:null});case"ADD_POST_FAIL":return Object(J.a)(Object(J.a)({},e),{},{error:t.payload});case"GET_MY_POSTS_FAIL":return Object(J.a)(Object(J.a)({},e),{},{error:"Server Error"});case"DELETE_POST":return Object(J.a)(Object(J.a)({},e),{},{refresh:!e.refresh});default:return Object(J.a)({},e)}}}),V=[a(47).a],Z=Object(H.d)(Q,H.a.apply(void 0,V));s.a.render(n.a.createElement(v.a,{store:Z},n.a.createElement(Y,null)),document.querySelector("#root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.fd20fbd3.chunk.js.map